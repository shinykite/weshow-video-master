<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="format-detection" content="telephone=no">
<title>Icon</title>
<style>
body {font-family:arial, 'Microsoft Yahei', '微软雅黑'; font-size:12px;}
*{padding: 0;margin: 0;font-size: 14px;line-height: 20px;font-family: arial;}
a, a:visited{color:#337ab7;text-decoration: none;}
header{padding: 10px 0 2px 0;background-color: #fff; width:100%;}
h1{font-size: 24px;color:#333;font-weight: normal; font-family:arial, 'Microsoft Yahei', '微软雅黑';}
code{padding: 2px 4px;font-size: 90%;color: #c7254e;background-color: #f9f2f4;border-radius: 4px;}
.wrap{width: 100%;margin: 10px;}
.content{margin-top: 30px; padding:0 10px 0 10px; width: 100%;}
.content1{margin-top: 30px; padding-left:10px; width: 100%; line-height:160%;}
.list{width:100%;font-size: 36px;}
.list .item{position: relative;padding-left: 10px;margin-top: 50px;font-size: 36px;}
.list .item .step{position: absolute;width: 36px;height: 36px;top:-3px;left:0; text-align: center;line-height: 36px;}
.list .item h2{font-size: 38px;font-weight: normal;}
.list .item p{line-height: 36px;margin-top: 10px;font-size: 36px;}
.list .item t1{line-height: 36px;margin-top: 10px;font-size: 36px;}
table.dataintable {margin-top:15px; border-collapse:collapse; border:1px solid #aaa; width:100%; font-family:arial, 'Microsoft Yahei', '微软雅黑'; }
table.dataintable td {vertical-align:text-top; padding:2px; border:1px solid #666; font-family:arial, 'Microsoft Yahei', '微软雅黑'; font-size:12px;}
table.dataintable th {vertical-align:baseline; padding:2px; background-color:#999; border:1px solid #3F3F3F; text-align:left; color:#fff;}
.bn {border: 1px; width:100%; }
p {padding:3px 0 3px 0;}
</style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Icon</h1>
    </div>
  </header>
  <div class="content">
    <div class="list">
      <table class="dataintable">
        <tr>
          <th width="3%">ID</th>
          <th width="4%">名称</th>
          <th width="15%">图标</th>
          <th width="6%">简介</th>
          <th width="6%">地址</th>
          <th width="3%">影响力</th>
          <th width="3%">ReadValue</th>
          <th width="3%">ReadCount</th>
          <th width="4%">添加时间</th>
          <th width="3%">备注</th>
          <th width="3%" colspan="2">操作</th>
        </tr>
        <% var currentId = 0; %>
        <% var index = 0; %>
        <% data_list.forEach(function(item) { %>
        <tr>
          <form action="update" id="form_<%= index %>" enctype="multipart/form-data" method="post"target="hidden_frame_<%= index %>">
            <td><input class="bn" size="1" type="text" name ="id" value="<%= item.id %>"/></td>
            <td><input class="bn" size="1" type="text" name ="name" value="<%= item.name %>"/></td>
            <td><input class="bn" size="1" type="text" name ="cover_url" value="<%= item.cover_url %>"/></td>
            <td><input class="bn" size="1" type="text" name ="description" value="<%= item.description %>"/></td>
            <td><input class="bn" size="1" type="text" name ="address" value="<%= item.address %>"/></td>
            <td><input class="bn" size="1" type="text" name ="impact" value="<%= item.impact %>"/></td>
            <td><input class="bn" size="1" type="text" name ="read_value" value="<%= item.read_value %>"/></td>
            <td><input class="bn" size="3" type="text" name ="read_count" value="<%= item.read_count %>"/></td>
            <td><input class="bn" size="2" type="text" name ="add_time" value="<%= item.add_time %>"/></td>
            <td><input class="bn" size="8" type="text" name ="note" value="<%= item.note %>"/></td>
            <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
            <td><input id="upd_btn_<%= index %>" size="2" type="submit" value="更新"/></td>
          </form>
          <iframe name="hidden_frame_<%= index %>" style="display:none;"></iframe>
          <form action="delete" enctype="multipart/form-data" method="post">
            <td>
              <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
              <input type="hidden" name="id" value="<%= item.id %>">
              <input size="2" type="submit" name="delete" value="删除"/>
            </td>
          </form>
        </tr>
        <% currentId = item.id %>
        <% index = index + 1 %>
        <% }) %>
        <tr>
          <form action="webadd" enctype="multipart/form-data" method="post">
            <td><input size="2" type="submit" value="添加"/></td>
            <td><input class="bn" size="1" type="text" name ="name" value="1"/></td>
            <td><input class="bn" size="1" type="text" name ="cover_url" value=""/></td>
            <td><input class="bn" size="1" type="text" name ="description"/></td>
            <td><input class="bn" size="1" type="text" name ="address"/></td>
            <td><input class="bn" size="1" type="text" name ="impact"/></td>
            <td><input class="bn" size="1" type="text" name ="read_value"/></td>
            <td><input class="bn" size="1" type="text" name ="read_count"/></td>
            <td><input class="bn" size="2" type="text" name ="add_time" disabled="true"/></td>
            <td><input class="bn" size="8" type="text" name ="note"></td>
            <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
            <td><input size="2" type="submit" value="添加"/></td>
            <td></td>
          </form>
        </tr>
        <tr>
            <td colspan="27" height="10px"></td>
        </tr>
        <script type="text/javascript">
          function submitAll() {
            for (var i = 0; i < <%= index %>; i++) {
              document.getElementById("form_" + i).submit();
            }
          }
        </script>
        <tr>
            <td colspan="23"><input size="4" type="submit" value=" 批量更新 " onclick="submitAll();"/></td>
            <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
        </tr>
        <tr>
          <form action="index" enctype="multipart/form-data" method="post">
            <td colspan="3">起始ID：<input size="5" type="text" name ="id" value="<%= currentId + 1 %>"/></td>
            <td>个数：<input size="5" type="text" name ="size" value="10"/></td>
            <td colspan="23"><input size="4" type="submit" value=" 下一页 "/></td>
            <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
          </form>
        </tr>
      </table>
      <br><br>

      <h2>选择整理文件,批量添加</h2>
      <form class="p" action="upload" enctype="multipart/form-data" method="post">
        <p>请选择文件(只支持以逗号为分隔符的csv或txt文件)：<br><input type="file" name ="file_input"/></p>
        <p><input type="submit" name ="file_submit" value=" 　  - -  上 传  - -  　 "/></p>
        <input type="hidden" name="wxtoken" value="<%= wxtoken %>">
      </form><br><br>

      <br><br>
    </div>
  </div>
</body>
</html>